(function(a){a.fn.retinize=function(b,c){if(window.devicePixelRatio>=2){var d=a(this).find("*").andSelf().filter(function(){return a(this).is("img")||a(this).css("backgroundImage")!=="none"});for(i=0;i<d.length;i++){var e=d[i];var f=a(e).attr("src");var g=a(e).css("background-image");var h=a(e).width();var j=a(e).height();function k(a){if(!(!a.match(/^https?\:/i)||a.match("//"+document.domain))){return false}else{var b=new XMLHttpRequest;b.open("HEAD",a,false);b.send();return b.status!=404}}if(a(e).is("img")&&f.indexOf("@2x")==-1){var l=f.lastIndexOf(".");if(l!=-1){f=f.substr(0,l)+"@2x"+f.substr(l)}if(k(f)){a(e).attr("src",f);a(e).width(h).height(j)}}else if(g!=="none"&&g.indexOf("@2x")==-1){var m=g;var l=m.lastIndexOf(".");if(l!=-1){m=m.substr(0,l)+"@2x"+m.substr(l)}var n=m;var n=n.substr(4);var n=n.substr(0,n.length-1);if(k(n)){a(e).css("background-image",m)}}}}}})(jQuery)